!function(e){var t=0,n=!1,a=!1;try{var o=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,o)}catch(e){}var r=function(e){var n=e.target,a=window.innerWidth/window.document.documentElement.clientWidth;if(!(e.touches.length>1||1!==a)){for(;n!==document.body&&n!==document;){var o=window.getComputedStyle(n);if(!o)break;if("INPUT"===n.nodeName&&"range"===n.getAttribute("type"))return;var r=o.getPropertyValue("-webkit-overflow-scrolling"),i=o.getPropertyValue("overflow-y"),s=parseInt(o.getPropertyValue("height"),10),d="touch"===r&&("auto"===i||"scroll"===i),l=n.scrollHeight>n.offsetHeight;if(d&&l){var u=e.touches?e.touches[0].screenY:e.screenY,c=t<=u&&0===n.scrollTop,m=t>=u&&n.scrollHeight-n.scrollTop===s;return void((c||m)&&e.preventDefault())}n=n.parentNode}e.preventDefault()}},i=function(e){t=e.touches?e.touches[0].screenY:e.screenY},s=function(){window.addEventListener("touchstart",i,!!a&&{passive:!1}),window.addEventListener("touchmove",r,!!a&&{passive:!1}),n=!0},d=document.createElement("div");document.documentElement.appendChild(d),d.style.WebkitOverflowScrolling="touch";var l="getComputedStyle"in window&&"touch"===window.getComputedStyle(d)["-webkit-overflow-scrolling"];document.documentElement.removeChild(d),l&&s();var u={enable:s,disable:function(){window.removeEventListener("touchstart",i,!1),window.removeEventListener("touchmove",r,!1),n=!1},isEnabled:function(){return n}};"undefined"!=typeof module&&module.exports&&(module.exports=u),"function"==typeof e.define?function(e){e("iNoBounce",[],(function(){return u}))}(e.define):e.iNoBounce=u}(this),function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var n=this||t;if(e=parseFloat(e),n.ctx||l(),void 0!==e&&e>=0&&e<=1){if(n._volume=e,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var a=0;a<n._howls.length;a++)if(!n._howls[a]._webAudio)for(var o=n._howls[a]._getSoundIds(),r=0;r<o.length;r++){var i=n._howls[a]._soundById(o[r]);i&&i._node&&(i._node.volume=i._volume*e)}return n}return n._volume},mute:function(e){var n=this||t;n.ctx||l(),n._muted=e,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e?0:n._volume,t.ctx.currentTime);for(var a=0;a<n._howls.length;a++)if(!n._howls[a]._webAudio)for(var o=n._howls[a]._getSoundIds(),r=0;r<o.length;r++){var i=n._howls[a]._soundById(o[r]);i&&i._node&&(i._node.muted=!!e||i._muted)}return n},stop:function(){for(var e=this||t,n=0;n<e._howls.length;n++)e._howls[n].stop();return e},unload:function(){for(var e=this||t,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,l()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,n=null;try{n="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!n||"function"!=typeof n.canPlayType)return e;var a=n.canPlayType("audio/mpeg;").replace(/^no$/,""),o=e._navigator?e._navigator.userAgent:"",r=o.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33,s=-1!==o.indexOf("Safari")&&-1===o.indexOf("Chrome"),d=o.match(/Version\/(.*?) /),l=s&&d&&parseInt(d[1],10)<15;return e._codecs={mp3:!(i||!a&&!n.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!a,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(t){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var a=new Audio;a._unlocked=!0,e._releaseHtml5Audio(a)}catch(t){e.noAudio=!0;break}for(var o=0;o<e._howls.length;o++)if(!e._howls[o]._webAudio)for(var r=e._howls[o]._getSoundIds(),i=0;i<r.length;i++){var s=e._howls[o]._soundById(r[i]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var d=e.ctx.createBufferSource();d.buffer=e._scratchBuffer,d.connect(e.ctx.destination),void 0===d.start?d.noteOn(0):d.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),d.onended=function(){d.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var n=(new Audio).play();return n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)&&n.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var n=this||t;return e._unlocked&&n._html5AudioPool.push(e),n},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&t.usingWebAudio){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio)for(var a=0;a<e._howls[n]._sounds.length;a++)if(!e._howls[n]._sounds[a]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&t.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var t=new e,n=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};n.prototype={init:function(e){var n=this;return t.ctx||l(),n._autoplay=e.autoplay||!1,n._format="string"!=typeof e.format?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src="string"!=typeof e.src?e.src:[e.src],n._volume=void 0!==e.volume?e.volume:1,n._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onunlock=e.onunlock?[{fn:e.onunlock}]:[],n._onresume=[],n._webAudio=t.usingWebAudio&&!n._html5,void 0!==t.ctx&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&"none"!==n._preload&&n.load(),n},load:function(){var e=this,n=null;if(!t.noAudio){"string"==typeof e._src&&(e._src=[e._src]);for(var o=0;o<e._src.length;o++){var i,s;if(e._format&&e._format[o])i=e._format[o];else{if("string"!=typeof(s=e._src[o])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(s))||(i=/\.([^.]+)$/.exec(s.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&t.codecs(i)){n=e._src[o];break}}return n?(e._src=n,e._state="loading","https:"===window.location.protocol&&"http:"===n.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&r(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")}e._emit("loaderror",null,"No audio support.")},play:function(e,n){var a=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===a._state&&!a._sprite[e])return null;if(void 0===e&&(e="__default",!a._playLock)){for(var r=0,i=0;i<a._sounds.length;i++)a._sounds[i]._paused&&!a._sounds[i]._ended&&(r++,o=a._sounds[i]._id);1===r?e=null:o=null}}var s=o?a._soundById(o):a._inactiveSound();if(!s)return null;if(o&&!e&&(e=s._sprite||"__default"),"loaded"!==a._state){s._sprite=e,s._ended=!1;var d=s._id;return a._queue.push({event:"play",action:function(){a.play(d)}}),d}if(o&&!s._paused)return n||a._loadQueue("play"),s._id;a._webAudio&&t._autoResume();var l=Math.max(0,s._seek>0?s._seek:a._sprite[e][0]/1e3),u=Math.max(0,(a._sprite[e][0]+a._sprite[e][1])/1e3-l),c=1e3*u/Math.abs(s._rate),m=a._sprite[e][0]/1e3,p=(a._sprite[e][0]+a._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var _=function(){s._paused=!1,s._seek=l,s._start=m,s._stop=p,s._loop=!(!s._loop&&!a._sprite[e][2])};if(!(l>=p)){var g=s._node;if(a._webAudio){var v=function(){a._playLock=!1,_(),a._refreshBuffer(s);var e=s._muted||a._muted?0:s._volume;g.gain.setValueAtTime(e,t.ctx.currentTime),s._playStart=t.ctx.currentTime,void 0===g.bufferSource.start?s._loop?g.bufferSource.noteGrainOn(0,l,86400):g.bufferSource.noteGrainOn(0,l,u):s._loop?g.bufferSource.start(0,l,86400):g.bufferSource.start(0,l,u),c!==1/0&&(a._endTimers[s._id]=setTimeout(a._ended.bind(a,s),c)),n||setTimeout((function(){a._emit("play",s._id),a._loadQueue()}),0)};"running"===t.state&&"interrupted"!==t.ctx.state?v():(a._playLock=!0,a.once("resume",v),a._clearTimer(s._id))}else{var f=function(){g.currentTime=l,g.muted=s._muted||a._muted||t._muted||g.muted,g.volume=s._volume*t.volume(),g.playbackRate=s._rate;try{var o=g.play();if(o&&"undefined"!=typeof Promise&&(o instanceof Promise||"function"==typeof o.then)?(a._playLock=!0,_(),o.then((function(){a._playLock=!1,g._unlocked=!0,n?a._loadQueue():a._emit("play",s._id)})).catch((function(){a._playLock=!1,a._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):n||(a._playLock=!1,_(),a._emit("play",s._id)),g.playbackRate=s._rate,g.paused)return void a._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?a._endTimers[s._id]=setTimeout(a._ended.bind(a,s),c):(a._endTimers[s._id]=function(){a._ended(s),g.removeEventListener("ended",a._endTimers[s._id],!1)},g.addEventListener("ended",a._endTimers[s._id],!1))}catch(e){a._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===g.src&&(g.src=a._src,g.load());var y=window&&window.ejecta||!g.readyState&&t._navigator.isCocoonJS;if(g.readyState>=3||y)f();else{a._playLock=!0,a._state="loading";var h=function(){a._state="loaded",f(),g.removeEventListener(t._canPlayEvent,h,!1)};g.addEventListener(t._canPlayEvent,h,!1),a._clearTimer(s._id)}}return s._id}a._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),a=0;a<n.length;a++){t._clearTimer(n[a]);var o=t._soundById(n[a]);if(o&&!o._paused&&(o._seek=t.seek(n[a]),o._rateSeek=0,o._paused=!0,t._stopFade(n[a]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var a=n._getSoundIds(e),o=0;o<a.length;o++){n._clearTimer(a[o]);var r=n._soundById(a[o]);r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,n._stopFade(a[o]),r._node&&(n._webAudio?r._node.bufferSource&&(void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),n._cleanBuffer(r._node)):isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause(),r._node.duration===1/0&&n._clearSound(r._node))),t||n._emit("stop",r._id))}return n},mute:function(e,n){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"mute",action:function(){a.mute(e,n)}}),a;if(void 0===n){if("boolean"!=typeof e)return a._muted;a._muted=e}for(var o=a._getSoundIds(n),r=0;r<o.length;r++){var i=a._soundById(o[r]);i&&(i._muted=e,i._interval&&a._stopFade(i._id),a._webAudio&&i._node?i._node.gain.setValueAtTime(e?0:i._volume,t.ctx.currentTime):i._node&&(i._node.muted=!!t._muted||e),a._emit("mute",i._id))}return a},volume:function(){var e,n,a,o=this,r=arguments;if(0===r.length)return o._volume;if(1===r.length||2===r.length&&void 0===r[1]?o._getSoundIds().indexOf(r[0])>=0?n=parseInt(r[0],10):e=parseFloat(r[0]):r.length>=2&&(e=parseFloat(r[0]),n=parseInt(r[1],10)),!(void 0!==e&&e>=0&&e<=1))return(a=n?o._soundById(n):o._sounds[0])?a._volume:0;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,r)}}),o;void 0===n&&(o._volume=e),n=o._getSoundIds(n);for(var i=0;i<n.length;i++)(a=o._soundById(n[i]))&&(a._volume=e,r[2]||o._stopFade(n[i]),o._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(e,t.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=e*t.volume()),o._emit("volume",a._id));return o},fade:function(e,n,a,o){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(e,n,a,o)}}),r;e=Math.min(Math.max(0,parseFloat(e)),1),n=Math.min(Math.max(0,parseFloat(n)),1),a=parseFloat(a),r.volume(e,o);for(var i=r._getSoundIds(o),s=0;s<i.length;s++){var d=r._soundById(i[s]);if(d){if(o||r._stopFade(i[s]),r._webAudio&&!d._muted){var l=t.ctx.currentTime,u=l+a/1e3;d._volume=e,d._node.gain.setValueAtTime(e,l),d._node.gain.linearRampToValueAtTime(n,u)}r._startFadeInterval(d,e,n,a,i[s],void 0===o)}}return r},_startFadeInterval:function(e,t,n,a,o,r){var i=this,s=t,d=n-t,l=Math.abs(d/.01),u=Math.max(4,l>0?a/l:a),c=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var o=(Date.now()-c)/a;c=Date.now(),s+=d*o,s=Math.round(100*s)/100,s=d<0?Math.max(n,s):Math.min(n,s),i._webAudio?e._volume=s:i.volume(s,e._id,!0),r&&(i._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,i.volume(n,e._id),i._emit("fade",e._id))}),u)},_stopFade:function(e){var n=this,a=n._soundById(e);return a&&a._interval&&(n._webAudio&&a._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(a._interval),a._interval=null,n.volume(a._fadeTo,e),a._fadeTo=null,n._emit("fade",e)),n},loop:function(){var e,t,n,a=this,o=arguments;if(0===o.length)return a._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=a._soundById(parseInt(o[0],10)))&&n._loop;e=o[0],a._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var r=a._getSoundIds(t),i=0;i<r.length;i++)(n=a._soundById(r[i]))&&(n._loop=e,a._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,a.playing(r[i])&&(a.pause(r[i],!0),a.play(r[i],!0)))));return a},rate:function(){var e,n,a,o=this,r=arguments;if(0===r.length)n=o._sounds[0]._id;else if(1===r.length){var i=o._getSoundIds(),s=i.indexOf(r[0]);s>=0?n=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),n=parseInt(r[1],10));if("number"!=typeof e)return(a=o._soundById(n))?a._rate:o._rate;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,r)}}),o;void 0===n&&(o._rate=e),n=o._getSoundIds(n);for(var d=0;d<n.length;d++)if(a=o._soundById(n[d])){o.playing(n[d])&&(a._rateSeek=o.seek(n[d]),a._playStart=o._webAudio?t.ctx.currentTime:a._playStart),a._rate=e,o._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.setValueAtTime(e,t.ctx.currentTime):a._node&&(a._node.playbackRate=e);var l=o.seek(n[d]),u=(o._sprite[a._sprite][0]+o._sprite[a._sprite][1])/1e3-l,c=1e3*u/Math.abs(a._rate);!o._endTimers[n[d]]&&a._paused||(o._clearTimer(n[d]),o._endTimers[n[d]]=setTimeout(o._ended.bind(o,a),c)),o._emit("rate",a._id)}return o},seek:function(){var e,n,a=this,o=arguments;if(0===o.length)a._sounds.length&&(n=a._sounds[0]._id);else if(1===o.length){var r=a._getSoundIds(),i=r.indexOf(o[0]);i>=0?n=parseInt(o[0],10):a._sounds.length&&(n=a._sounds[0]._id,e=parseFloat(o[0]))}else 2===o.length&&(e=parseFloat(o[0]),n=parseInt(o[1],10));if(void 0===n)return 0;if("number"==typeof e&&("loaded"!==a._state||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,o)}}),a;var s=a._soundById(n);if(s){if(!("number"==typeof e&&e>=0)){if(a._webAudio){var d=a.playing(n)?t.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+d*Math.abs(s._rate))}return s._node.currentTime}var u=a.playing(n);u&&a.pause(n,!0),s._seek=e,s._ended=!1,a._clearTimer(n),a._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var c=function(){u&&a.play(n,!0),a._emit("seek",n)};if(u&&!a._webAudio){var m=function(){a._playLock?setTimeout(m,0):c()};setTimeout(m,0)}else c()}return a},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var a=0;a<t._sounds.length;a++)if(!t._sounds[a]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,a=t._soundById(e);return a&&(n=t._sprite[a._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,n=e._sounds,a=0;a<n.length;a++)n[a]._paused||e.stop(n[a]._id),e._webAudio||(e._clearSound(n[a]._node),n[a]._node.removeEventListener("error",n[a]._errorFn,!1),n[a]._node.removeEventListener(t._canPlayEvent,n[a]._loadFn,!1),n[a]._node.removeEventListener("ended",n[a]._endFn,!1),t._releaseHtml5Audio(n[a]._node)),delete n[a]._node,e._clearTimer(n[a]._id);var r=t._howls.indexOf(e);r>=0&&t._howls.splice(r,1);var i=!0;for(a=0;a<t._howls.length;a++)if(t._howls[a]._src===e._src||e._src.indexOf(t._howls[a]._src)>=0){i=!1;break}return o&&i&&delete o[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,a){var o=this["_on"+e];return"function"==typeof t&&o.push(a?{id:n,fn:t,once:a}:{id:n,fn:t}),this},off:function(e,t,n){var a=this,o=a["_on"+e],r=0;if("number"==typeof t&&(n=t,t=null),t||n)for(r=0;r<o.length;r++){var i=n===o[r].id;if(t===o[r].fn&&i||!t&&i){o.splice(r,1);break}}else if(e)a["_on"+e]=[];else{var s=Object.keys(a);for(r=0;r<s.length;r++)0===s[r].indexOf("_on")&&Array.isArray(a[s[r]])&&(a[s[r]]=[])}return a},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var a=this,o=a["_on"+e],r=o.length-1;r>=0;r--)o[r].id&&o[r].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(a,o[r].fn),0),o[r].once&&a.off(e,o[r].fn,o[r].id));return a._loadQueue(e),a},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var n=this,a=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(n._ended.bind(n,e),100),n;var o=!(!e._loop&&!n._sprite[a][2]);if(n._emit("end",e._id),!n._webAudio&&o&&n.stop(e._id,!0).play(e._id),n._webAudio&&o){n._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),r)}return n._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,n._clearTimer(e._id),n._cleanBuffer(e._node),t._autoSuspend()),n._webAudio||o||n.stop(e._id,!0),n},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new a(e)},_drain:function(){var e=this,t=e._pool,n=0,a=0;if(!(e._sounds.length<t)){for(a=0;a<e._sounds.length;a++)e._sounds[a]._ended&&n++;for(a=e._sounds.length-1;a>=0;a--){if(n<=t)return;e._sounds[a]._ended&&(e._webAudio&&e._sounds[a]._node&&e._sounds[a]._node.disconnect(0),e._sounds.splice(a,1),n--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=o[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),this},_cleanBuffer:function(e){var n=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),n))try{e.bufferSource.buffer=t._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,n._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,a=t._muted||e._muted||e._parent._muted?0:e._volume;return n._webAudio?(e._node=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(a,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):t.noAudio||(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=n._src,e._node.preload=!0===n._preload?"auto":n._preload,e._node.volume=a*t.volume(),e._node.load()),e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]}),"loaded"!==n._state&&(n._state="loaded",n._emit("load"),n._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var o={},r=function(e){var t=e._src;if(o[t])return e._duration=o[t].duration,void d(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),a=new Uint8Array(n.length),r=0;r<n.length;++r)a[r]=n.charCodeAt(r);s(a.buffer,e)}else{var l=new XMLHttpRequest;l.open(e._xhr.method,t,!0),l.withCredentials=e._xhr.withCredentials,l.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){l.setRequestHeader(t,e._xhr.headers[t])})),l.onload=function(){var t=(l.status+"")[0];"0"===t||"2"===t||"3"===t?s(l.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+l.status+".")},l.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete o[t],e.load())},i(l)}},i=function(e){try{e.send()}catch(t){e.onerror()}},s=function(e,n){var a=function(){n._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&n._sounds.length>0?(o[n._src]=e,d(n,e)):a()};"undefined"!=typeof Promise&&1===t.ctx.decodeAudioData.length?t.ctx.decodeAudioData(e).then(r).catch(a):t.ctx.decodeAudioData(e,r,a)},d=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},l=function(){if(t.usingWebAudio){try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(e){t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),n=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),a=n?parseInt(n[1],10):null;if(e&&a&&a<9){var o=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!o&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};"function"==typeof define&&define.amd&&define([],(function(){return{Howler:t,Howl:n}})),"undefined"!=typeof exports&&(exports.Howler=t,exports.Howl=n),"undefined"!=typeof global?(global.HowlerGlobal=e,global.Howler=t,global.Howl=n,global.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=a)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var a=this;return a.ctx&&a.ctx.listener?(t="number"!=typeof t?a._pos[1]:t,n="number"!=typeof n?a._pos[2]:n,"number"!=typeof e?a._pos:(a._pos=[e,t,n],void 0!==a.ctx.listener.positionX?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]),a)):a},HowlerGlobal.prototype.orientation=function(e,t,n,a,o,r){var i=this;if(!i.ctx||!i.ctx.listener)return i;var s=i._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,a="number"!=typeof a?s[3]:a,o="number"!=typeof o?s[4]:o,r="number"!=typeof r?s[5]:r,"number"!=typeof e?s:(i._orientation=[e,t,n,a,o,r],void 0!==i.ctx.listener.forwardX?(i.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),i.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),i.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),i.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),i.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),i.ctx.listener.upZ.setTargetAtTime(r,Howler.ctx.currentTime,.1)):i.ctx.listener.setOrientation(e,t,n,a,o,r),i)},Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"stereo",action:function(){a.stereo(t,n)}}),a;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0]}for(var r=a._getSoundIds(n),i=0;i<r.length;i++){var s=a._soundById(r[i]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,o),"spatial"===o?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),a._emit("stereo",s._id)}}return a},Howl.prototype.pos=function(t,n,a,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(t,n,a,o)}}),r;if(n="number"!=typeof n?0:n,a="number"!=typeof a?-.5:a,void 0===o){if("number"!=typeof t)return r._pos;r._pos=[t,n,a]}for(var i=r._getSoundIds(o),s=0;s<i.length;s++){var d=r._soundById(i[s]);if(d){if("number"!=typeof t)return d._pos;d._pos=[t,n,a],d._node&&(d._panner&&!d._panner.pan||e(d,"spatial"),void 0!==d._panner.positionX?(d._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):d._panner.setPosition(t,n,a)),r._emit("pos",d._id)}}return r},Howl.prototype.orientation=function(t,n,a,o){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(t,n,a,o)}}),r;if(n="number"!=typeof n?r._orientation[1]:n,a="number"!=typeof a?r._orientation[2]:a,void 0===o){if("number"!=typeof t)return r._orientation;r._orientation=[t,n,a]}for(var i=r._getSoundIds(o),s=0;s<i.length;s++){var d=r._soundById(i[s]);if(d){if("number"!=typeof t)return d._orientation;d._orientation=[t,n,a],d._node&&(d._panner||(d._pos||(d._pos=r._pos||[0,0,-.5]),e(d,"spatial")),void 0!==d._panner.orientationX?(d._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):d._panner.setOrientation(t,n,a)),r._emit("orientation",d._id)}}return r},Howl.prototype.pannerAttr=function(){var t,n,a,o=this,r=arguments;if(!o._webAudio)return o;if(0===r.length)return o._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(a=o._soundById(parseInt(r[0],10)))?a._pannerAttr:o._pannerAttr;t=r[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:o._panningModel})}else 2===r.length&&(t=r[0],n=parseInt(r[1],10));for(var i=o._getSoundIds(n),s=0;s<i.length;s++)if(a=o._soundById(i[s])){var d=a._pannerAttr;d={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:d.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:d.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:d.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:d.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:d.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:d.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:d.panningModel};var l=a._panner;l?(l.coneInnerAngle=d.coneInnerAngle,l.coneOuterAngle=d.coneOuterAngle,l.coneOuterGain=d.coneOuterGain,l.distanceModel=d.distanceModel,l.maxDistance=d.maxDistance,l.refDistance=d.refDistance,l.rolloffFactor=d.rolloffFactor,l.panningModel=d.panningModel):(a._pos||(a._pos=o._pos||[0,0,-.5]),e(a,"spatial"))}return o},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}();const Evader={namespace:function(e){let t=Evader,n=e.split(".");n="Evader"===n[0]?n.slice(1):n;for(let e=0,a=n.length;e<a;e++)void 0===t[n[e]]&&(t[n[e]]={}),t=t[n[e]];return t},extend:function(e,t){const n=Evader.namespace(e);Object.assign(n,t)}};Evader.extend("config",{game:function(){const e=(e,t=100)=>{const n={sprint:[80,60,40,30],meditation:[90,80,70,60,50,50,50,50,50,50,40]}[e];return n.reduce(((e,n,a)=>{if(a<1)return e;const{gameLoopInterval:o,accumulatedTime:r}=e[a-1];return e.push({gameLoopInterval:n,accumulatedTime:r+o*t}),e}),[{gameLoopInterval:n[0],accumulatedTime:0}])};return{gameTicksPerInterval:100,meditation:{medalScoreMap:{apprentice:-1,bronze:9,silver:30,gold:48,extraordinaire:60},gameTickMedalMap:{100:"bronze",400:"silver",760:"gold",1e3:"extraordinaire"},gameLoopIntervals:e("meditation")},sprint:{medalScoreMap:{apprentice:-1,bronze:8,silver:14,gold:18,extraordinaire:21},gameTickMedalMap:{100:"bronze",200:"silver",300:"gold",400:"extraordinaire"},gameLoopIntervals:e("sprint")}}}(),entity:{enemyKeys:["enemy0","enemy1","enemy2","enemy3"],defaultGameArea:{gameAreaDimensions:"(450px)²",playerDimensions:{width:40,height:40},enemyDimensions:{enemy0:{width:60,height:50},enemy1:{width:100,height:20},enemy2:{width:30,height:60},enemy3:{width:60,height:60}},initialPlayerPosition:{x:205,y:205},initalEnemyPoseValues:[{orientation:{x:-1,y:1},position:{x:270,y:60}},{orientation:{x:-1,y:-1},position:{x:300,y:330}},{orientation:{x:1,y:-1},position:{x:70,y:320}},{orientation:{x:1,y:1},position:{x:70,y:70}}],enemySpeedValues:[{x:10,y:12},{x:12,y:20},{x:15,y:13},{x:17,y:11}]},smallerGameArea:{mediaQueryString:"(max-width: 599px), (max-height: 699px)",gameAreaDimensions:"(350px)²",playerDimensions:{width:31.11,height:31.11},enemyDimensions:{enemy0:{width:46.67,height:38.89},enemy1:{width:77.78,height:15.56},enemy2:{width:23.33,height:46.67},enemy3:{width:46.67,height:46.67}},initialPlayerPosition:{x:159.44,y:159.44},initalEnemyPoseValues:[{orientation:{x:-1,y:1},position:{x:210,y:46.67}},{orientation:{x:-1,y:-1},position:{x:233.33,y:256.67}},{orientation:{x:1,y:-1},position:{x:54.44,y:248.89}},{orientation:{x:1,y:1},position:{x:54.44,y:54.44}}],enemySpeedValues:[{x:6.666666666666666,y:8},{x:8,y:13.333333333333332},{x:10,y:8.666666666666666},{x:11.333333333333332,y:7.333333333333333}]}}}),Evader.extend("utils",{general:{shuffleArray(e){const t=[...e];let n,a,o=t.length;for(;o;)a=Math.floor(Math.random()*o--),n=t[o],t[o]=t[a],t[a]=n;return t},deepClone(e,t=new Map){const{deepClone:n}=Evader.utils.general,a=t.get(e);if(a)return a;if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map((e=>n(e,t)));if(e instanceof Date)return new Date(e.valueOf());const o={};t.set(e,o);const r=Object.getOwnPropertyDescriptors(e);for(const e in r)Object.defineProperty(o,e,{...r[e],value:n(r[e].value,t)});return o.__proto__=e.__proto__,o}},view:{setElementPosition(e,t){e.style.left=`${t.x}px`,e.style.top=`${t.y}px`},setElementPositions(e,t){for([elementId,{position:elementPosition}]of Object.entries(t))Evader.utils.view.setElementPosition(e[elementId],elementPosition)},getBoundingRect(e){const{bottom:t,height:n,left:a,right:o,top:r,width:i,x:s,y:d}=e.getBoundingClientRect();return{bottom:t,height:n,left:a,right:o,top:r,width:i,x:s,y:d}},getBorderWidth:e=>parseInt(getComputedStyle(e).getPropertyValue("border-left-width")),isElementAtBounds(e,{boundAreaBoundingRect:t,boundAreaBorderWidth:n}){const a=e.getBoundingClientRect();return{x:a.right>t.right-n||a.left<t.left+n,y:a.bottom>t.bottom-n||a.top<t.top+n}},getEventCoordinates(e,t={changedTouchEvent:!1}){let n=e;return(e.touches||e.changedTouches)&&([n]=t.changedTouchEvent?e.changedTouches:e.touches),{x:n.pageX,y:n.pageY}}},game:{getMedalType(e,t){const{medalScoreMap:n}=Evader.config.game[e],a=Object.keys(n).sort(((e,t)=>n[t]-n[e])),o=a.findIndex((e=>t>n[e]));return a[o]}}}),Evader.extend("game",function(){const{getMedalType:e}=Evader.utils.game,t=e=>{const{view:{gameAreaBound:t},enemy:{poses:n,speeds:a}}=Evader.state.getGameState(),{isEnemyAtBounds:o}=Evader.view,r=a[e],{position:i,orientation:s}=n[e],d=o(e,t);(d.x||d.y)&&Evader.audio.play("enemyWallCollision");const l={x:(d.x?-1:1)*s.x,y:(d.y?-1:1)*s.y};return{position:{x:i.x+r.x*l.x,y:i.y+r.y*l.y},orientation:l}},n=()=>{const{view:{gameAreaBound:e},game:{startTimeMark:a,gameTick:o,gameLoopIntervalId:r},enemy:{poses:i},misc:{gameOptions:{gameMode:s}},updateType:d}=Evader.state.getGameState();if("GAME_RESET"===d||"INIT"===d)return void clearTimeout(r);const l=(()=>{const{view:{gameAreaDescriptor:e,gameAreaBound:t},player:{position:n},enemy:{poses:a},misc:{gameOptions:{godMode:o}}}=Evader.state.getGameState();if(o.isActive)return{withWall:!1,withEnemy:!1};const{playerDimensions:r,enemyDimensions:i}=Evader.config.entity[e],{isPlayerAtBounds:s}=Evader.view;let d=null;for(const[e,t]of Object.entries(a)){const{position:a}=t,o={x:n.x-a.x,y:n.y-a.y};if(d=o.x>-r.width&&o.x<i[e].width&&o.y>-r.height&&o.y<i[e].height?e:null,d){Evader.audio.play("playerEnemyCollision");break}}const l=s(t),u=l.x||l.y;return u&&Evader.audio.play("playerWallCollision"),{withWall:u,withEnemy:d}})();if(l.withWall||l.withEnemy)return clearTimeout(r),Evader.game.endGame(l);const u=(e=>{if(!e)return[];const{getGameAreaBoundingRect:t}=Evader.view;return[{statePath:"view.gameAreaBound.boundingRect",newState:t()},{statePath:"view.gameAreaBound.boundMightShift",newState:!1}]})(e.boundMightShift),c=(e=>{const n={};for([enemy,enemyPose]of Object.entries(e))n[enemy]=t(enemy);return n})(i),{newGameTick:m,newGameLoopInterval:p,elapsedTime:_,gameLoopTimerDrift:g}=((e,t,n)=>{const{[e]:{gameLoopIntervals:a,gameTickMedalMap:o},gameTicksPerInterval:r}=Evader.config.game,i=t+1,s=a.length-1,d=Math.min(s,Math.floor(i/r)),{gameLoopInterval:l,accumulatedTime:u}=a[d],c=u+l*(i-r*d);o[t]&&Evader.audio.play(o[t]);const m=n?performance.now()-n:0;return{newGameTick:i,newGameLoopInterval:l,elapsedTime:m,gameLoopTimerDrift:m?m-c:0}})(s,o,a),v=setTimeout(n,Math.max(0,p-g));u.push({statePath:"game.elapsedTime",newState:_},{statePath:"game.gameTick",newState:m},{statePath:"game.gameLoopIntervalId",newState:v},{statePath:"game.gameLoopInterval",newState:p},{statePath:"enemy.poses",newState:c},{statePath:"updateType",newState:"GAME_LOOP_UPDATE"}),Evader.state.updateGameState(u)};return{init(){Evader.state.updateGameState([{statePath:"view.gameAreaBound.boundingRect",newState:Evader.view.getGameAreaBoundingRect()},{statePath:"updateType",newState:"GAME_INIT"}]),Evader.audio.play("gameOptionPlay")},holdPlayer(e){const{game:{startTime:t,gameLoopInterval:a}}=Evader.state.getGameState(),o=[{statePath:"player.cursor",newState:e}];if(t)o.push({statePath:"updateType",newState:"GAME_PLAYER_HOLD"});else{const e=setTimeout(n,a);o.push({statePath:"game.isInProgress",newState:!0},{statePath:"game.startTime",newState:(new Date).getTime()},{statePath:"game.startTimeMark",newState:performance.now()},{statePath:"game.gameLoopIntervalId",newState:e},{statePath:"updateType",newState:"GAME_START"})}Evader.state.updateGameState(o)},movePlayer(e){const{player:{cursor:t,position:n}}=Evader.state.getGameState(),a=t.x-e.x,o=t.y-e.y,r={x:n.x-a,y:n.y-o};Evader.state.updateGameState([{statePath:"player.cursor",newState:e},{statePath:"player.position",newState:r},{statePath:"updateType",newState:"GAME_PLAYER_MOVE"}])},releasePlayer(e){Evader.state.updateGameState([{statePath:"player.cursor",newState:e},{statePath:"updateType",newState:"GAME_PLAYER_RELEASE"}])},endGame(t){const{view:{gameAreaDescriptor:n},game:{elapsedTime:a},misc:{gameOptions:{randomiserEnabledOn:o,gameMode:r,darkModeIsEnabled:i,godMode:s},playerStats:{bestScore:d}}}=Evader.state.getGameState(),l=parseFloat((a/1e3).toFixed(3)),u=!Object.values(o).some((e=>!e)),c=d[n][r],m=(!c||l>c)&&u&&!s.wasToggled,p=[{statePath:"game.isInProgress",newState:!1},{statePath:"game.isOver",newState:!0},{statePath:"game.gameLoopIntervalId",newState:null},{statePath:"player.hasCollision",newState:t},{statePath:`misc.playerStats.lastScore.${n}.${r}`,newState:l},{statePath:"misc.lastGame",newState:{timestamp:Date.now(),finalScore:l,gameAreaDescriptor:n,gameMode:r,randomiserWasEnabled:u,godModeWasToggled:s.wasToggled,darkModeWasEnabled:i,isBestScoreGame:m,medal:`${e(r,l)}Medal`}},{statePath:"misc.gameOptions.godMode",newState:{isActive:!1,wasToggled:!1}},{statePath:"updateType",newState:"GAME_OVER"}];m&&p.push({statePath:`misc.playerStats.bestScore.${n}.${r}`,newState:l}),setTimeout((()=>Evader.audio.play(m?"superb":"gameOver")),500),Evader.state.updateGameState(p)},reset(){Evader.state.updateGameState([{statePath:"updateType",newState:"GAME_RESET"}])}}}()),Evader.extend("game.options",{toggleDarkMode(){const{misc:{gameOptions:{darkModeIsEnabled:e}}}=Evader.state.getGameState();Evader.state.updateGameState([{statePath:"misc.gameOptions.darkModeIsEnabled",newState:!e},{statePath:"updateType",newState:"OPTIONS_DARK_MODE_TOGGLE"}]),Evader.audio.play("gameOptionDarkModeToggle")},changeGameMode(){const{misc:{gameOptions:{gameMode:e}}}=Evader.state.getGameState(),t="sprint"===e?"meditation":"sprint";Evader.state.updateGameState([{statePath:"misc.gameOptions.gameMode",newState:t},{statePath:"updateType",newState:"OPTIONS_GAME_MODE_CHANGE"}]);const n="gameOption"+("sprint"===t?"SprintMode":"MeditationMode");Evader.audio.play(n)},toggleRandomiser(){const{misc:{gameOptions:{randomiserEnabledOn:e}}}=Evader.state.getGameState(),t=Object.entries(e).reduce(((e,t)=>{const[n,a]=t;return e[n]=!a,e}),{});Evader.state.updateGameState([{statePath:"misc.gameOptions.randomiserEnabledOn",newState:t},{statePath:"updateType",newState:"OPTIONS_GAME_RANDOMISER_TOGGLE"}]);const n=!Object.values(t).some((e=>!e));Evader.audio.play("gameOptionRandomiser"+(n?"On":"Off"))},clearPlayerStats(){Evader.state.updateGameState([{statePath:"updateType",newState:"OPTIONS_CLEAR_PLAYER_STATS"}]),Evader.audio.play("gameOptionClearStats")},toggleGodMode(){const{game:e,misc:{gameOptions:{godMode:t}}}=Evader.state.getGameState();Evader.state.updateGameState([{statePath:"misc.gameOptions.godMode.wasToggled",newState:!t.isActive||e.isInProgress},{statePath:"misc.gameOptions.godMode.isActive",newState:!t.isActive},{statePath:"updateType",newState:"OPTIONS_GOD_MODE_TOGGLE"}])},toggleVolume(){const{totalVolumeValues:e,setVolume:t}=Evader.audio,n=Evader.state.getGameState().misc.gameOptions.volume,a=(e+n-1)%e;t(n,a),Evader.state.updateGameState([{statePath:"misc.gameOptions.volume",newState:a},{statePath:"updateType",newState:"OPTIONS_VOLUME_TOGGLE"}]),Evader.audio.play("gameOptionVolumeToggle")}}),Evader.extend("state",function(){let e=null;const{deepClone:t,shuffleArray:n}=Evader.utils.general;function a(e,a){const{[e]:{initialPlayerPosition:o,initalEnemyPoseValues:r,enemySpeedValues:i},enemyKeys:s}=Evader.config.entity,d={cursor:{x:null,y:null},position:t(o),hasCollision:{withWall:null,withEnemy:null}},l=a.enemyPoses?n(s):s,u=a.enemySpeeds?n(s):s;return{initialPlayerState:d,initialEnemyState:s.reduce(((e,t,n)=>(e.poses[l[n]]=r[n],e.speeds[u[n]]=i[n],e)),{poses:{},speeds:{}})}}function o(t=e){const n=function(){const{isGameAreaSmaller:e,getGameAreaBorderWidth:t,getGameAreaBoundingRect:n}=Evader.view,a=e();return{gameAreaIsSmaller:a,gameAreaDescriptor:a?"smallerGameArea":"defaultGameArea",gameAreaBound:{boundingRect:n(),borderWidth:t(),boundMightShift:!0}}}(),{initialGameOptions:o,initialPlayerStats:r}=function(e){if(e){const{gameOptions:t,playerStats:n}=e.misc;return{initialGameOptions:t,initialPlayerStats:n}}return{initialGameOptions:Evader.state.persistence.get("GAME_OPTIONS")||{randomiserEnabledOn:{enemyPoses:!0,enemySpeeds:!0},gameMode:"meditation",darkModeIsEnabled:!0,godMode:{isActive:!1,wasToggled:!1},volume:3},initialPlayerStats:Evader.state.persistence.get("PLAYER_STATS")||{bestScore:{smallerGameArea:{meditation:null,sprint:null},defaultGameArea:{meditation:null,sprint:null}},lastScore:{smallerGameArea:{meditation:null,sprint:null},defaultGameArea:{meditation:null,sprint:null}}}}}(t),i=function(e){const{[e]:{gameLoopIntervals:t}}=Evader.config.game,[{gameLoopInterval:n}]=t;return{isInProgress:!1,isOver:!1,startTime:null,startTimeMark:null,elapsedTime:null,gameTick:0,gameLoopIntervalId:null,gameLoopInterval:n}}(o.gameMode),{initialPlayerState:s,initialEnemyState:d}=a(n.gameAreaDescriptor,o.randomiserEnabledOn);return{view:n,game:i,player:s,enemy:d,misc:{gameOptions:o,playerStats:r,lastGame:t?.misc.lastGame||null},updateType:"INIT"}}const r={GAME_INIT:["view.gameAreaBound.boundingRect"],GAME_START:["player.cursor","game.isInProgress","game.startTime","game.startTimeMark","game.gameLoopIntervalId"],GAME_LOOP_UPDATE:["view.gameAreaBound.boundingRect","view.gameAreaBound.boundMightShift","game.elapsedTime","game.gameTick","game.gameLoopIntervalId","game.gameLoopInterval","enemy.poses"],GAME_PLAYER_HOLD:["player.cursor","game.isInProgress","game.startTime","game.startTimeMark","game.gameLoopIntervalId"],GAME_PLAYER_MOVE:["player.cursor","player.position"],GAME_PLAYER_RELEASE:["player.cursor"],GAME_OVER:["game.isInProgress","game.isOver","game.gameLoopIntervalId","player.hasCollision","misc.playerStats.lastScore.defaultGameArea.meditation","misc.playerStats.lastScore.defaultGameArea.sprint","misc.playerStats.lastScore.smallerGameArea.meditation","misc.playerStats.lastScore.smallerGameArea.sprint","misc.playerStats.bestScore.defaultGameArea.meditation","misc.playerStats.bestScore.defaultGameArea.sprint","misc.playerStats.bestScore.smallerGameArea.meditation","misc.playerStats.bestScore.smallerGameArea.sprint","misc.lastGame","misc.gameOptions.godMode"],OPTIONS_DARK_MODE_TOGGLE:["misc.gameOptions.darkModeIsEnabled"],OPTIONS_GAME_MODE_CHANGE:["misc.gameOptions.gameMode"],OPTIONS_GAME_RANDOMISER_TOGGLE:["misc.gameOptions.randomiserEnabledOn"],OPTIONS_CLEAR_PLAYER_STATS:[],OPTIONS_GOD_MODE_TOGGLE:["misc.gameOptions.godMode.wasToggled","misc.gameOptions.godMode.isActive"],OPTIONS_VOLUME_TOGGLE:["misc.gameOptions.volume"]};return{initGameState:()=>(e=o(),t(e)),getGameState:()=>t(e??o()),updateGameState(n){if(!function(e){const t=[];let n=null;for(let a=0,o=e.length;a<o;a++){const{statePath:o,newState:r}=e[a];if(null==o)return!1;"updateType"===o?n=r:t.push(o)}return!!n&&!t.filter((e=>!r[n].includes(e))).length}(n))return console.error("Illegal state update!");let o=t(e);if(n.forEach((e=>{if(!e)return;const{statePath:t,newState:n}=e,a=t.split(".");let r=o;a.forEach(((e,t)=>{t!==a.length-1?r=r[e]:r[e]=n}))})),function(e){["GAME_OVER","OPTIONS_DARK_MODE_TOGGLE","OPTIONS_GAME_MODE_CHANGE","OPTIONS_GAME_RANDOMISER_TOGGLE","OPTIONS_VOLUME_TOGGLE","OPTIONS_GOD_MODE_TOGGLE"].includes(e.updateType)&&("GAME_OVER"===e.updateType&&(Evader.state.persistence.set("PLAYER_STATS",e.misc.playerStats),Evader.state.persistence.set("GAME_HISTORY",[...Evader.state.persistence.get("GAME_HISTORY",[]),e.misc.lastGame])),Evader.state.persistence.set("GAME_OPTIONS",e.misc.gameOptions))}(o),["OPTIONS_GAME_MODE_CHANGE","OPTIONS_GAME_RANDOMISER_TOGGLE"].includes(o.updateType)){const{initialPlayerState:e,initialEnemyState:t}=a(o.view.gameAreaDescriptor,o.misc.gameOptions.randomiserEnabledOn);o={...o,player:e,enemy:t,updateType:o.game.isInProgress?"GAME_RESET":o.updateType}}"OPTIONS_CLEAR_PLAYER_STATS"===o.updateType&&(Evader.state.persistence.remove("PLAYER_STATS"),Evader.state.persistence.remove("GAME_HISTORY"),o.misc={...o.misc,playerStats:{bestScore:{smallerGameArea:{meditation:null,sprint:null},defaultGameArea:{meditation:null,sprint:null}},lastScore:{smallerGameArea:{meditation:null,sprint:null},defaultGameArea:{meditation:null,sprint:null}}},lastGame:null},o.updateType="GAME_RESET");let i=e;e=o,Evader.view.render(e,i)}}}()),Evader.extend("state.persistence",function(){const e="EVADER_STATE_STORE_";return{get(t,n=null){if(!window.localStorage)return n;let a=window.localStorage.getItem(`${e}${t}`);if(!a)return n;try{a=JSON.parse(a)}catch(e){console&&console.warn&&console.warn(`'${t}' isn't valid JSON: ${a}`)}return a},set(t,n){if(window.localStorage)return window.localStorage.setItem(`${e}${t}`,JSON.stringify(n))},remove(t){if(window.localStorage)return window.localStorage.removeItem(`${e}${t}`)}}}()),Evader.extend("view",function(){const{view:{getEventCoordinates:e,getBorderWidth:t,getBoundingRect:n,isElementAtBounds:a,setElementPosition:o,setElementPositions:r},game:{getMedalType:i}}=Evader.utils,s={gameOptions:{godModeSwitch:document.getElementById("god-mode-status")},meta:{bestScore:document.getElementById("game-best-score"),lastScore:document.getElementById("game-last-score"),gameMode:document.getElementById("game-mode"),gameAreaSize:document.getElementById("game-area-size"),gameRandomiserStatus:document.getElementById("game-randomiser-status")},gameArea:document.getElementById("game-area"),player:document.getElementById("player"),enemies:{enemy0:document.getElementById("enemy0"),enemy1:document.getElementById("enemy1"),enemy2:document.getElementById("enemy2"),enemy3:document.getElementById("enemy3")},gameOverlayWrapper:document.getElementById("game-overlay"),gameOverlayButtons:{playBtn:document.getElementById("play-btn"),gameModeBtn:document.getElementById("game-mode-btn"),randomiserBtn:document.getElementById("randomiser-btn"),darkModeBtn:document.getElementById("dark-mode-btn"),clearStatsBtn:document.getElementById("clear-stats-btn"),volumeBtn:document.getElementById("volume-btn")}},d={gameOverlay:{playBtn(e,t,n){const a=e?.gameMode===t&&e?.gameAreaDescriptor===n;s.gameOverlayButtons.playBtn.innerHTML=`\n\t\t\t\t\t\t<div class="sprite sprite-${a?e.medal:"chequeredFlag"}"></div>\n\t\t\t\t\t\t<span>${a?"Play Again?":"Play?"}</span>\n\t\t\t\t\t`},gameModeBtn(e){s.gameOverlayButtons.gameModeBtn.innerHTML=`\n\t\t\t\t\t\t<div class="sprite sprite-${e}Mode"></div>\n\t\t\t\t\t\t<span>${"meditation"===e?"Meditation":"Sprint"}</span>\n\t\t\t\t\t`},randomiserBtn(e){s.gameOverlayButtons.randomiserBtn.innerHTML=`\n\t\t\t\t\t\t<div class="sprite sprite-randomiser${e?"":" sprite-grayscale"}"></div>\n\t\t\t\t\t\t<span>${e?"Randomiser On":"Randomiser Off"}</span>\n\t\t\t\t\t`},darkModeBtn(e){s.gameOverlayButtons.darkModeBtn.innerHTML=`\n\t\t\t\t\t\t<div class="sprite sprite-${e?"cloud":"sunBehindCloud"}"></div>\n\t\t\t\t\t\t<span>${e?"Dark":"Light"}</span>\n\t\t\t\t\t`},clearStatsBtn(){s.gameOverlayButtons.clearStatsBtn.innerHTML='\n\t\t\t\t\t\t<div class="sprite sprite-broom"></div>\n\t\t\t\t\t\t<span>Clear Stats?</span>\n\t\t\t\t\t'},volumeBtn(e){const t=["mutedVolumeSpeaker","lowVolumeSpeaker","mediumVolumeSpeaker","highVolumeSpeaker"][e??3],[n]=t.split("VolumeSpeaker");s.gameOverlayButtons.volumeBtn.innerHTML=`\n\t\t\t\t\t\t<div class="sprite sprite-${t}"></div>\n\t\t\t\t\t\t<span>${n}</span>\n\t\t\t\t\t`}}},l={createGameOverlayButtonHandler(e,t,n={shouldDeactivateButtonAfterClick:!1}){const a=(e,t=!1)=>{e.classList.remove("active"),e.blur(),t&&Evader.audio.play("gameOptionDeselect")};return function(o){o.preventDefault();if(void 0!==o.button&&0!==o.button)return;if("GAME_INIT"===Evader.state.getGameState().updateType)return;Object.keys(s.gameOverlayButtons).forEach((t=>{if(t===e)return;s.gameOverlayButtons[t].classList.remove("active")}));const r=s.gameOverlayButtons[e];if(!r.classList.contains("active"))return((e,t=!1)=>{t&&Evader.audio.play("gameOptionSelect"),e.classList.add("active")})(r,playOptionSelectionAudio=!0);return"SPAN"!==o.target.nodeName?a(r,playOptionSelectionAudio=!0):(t(),n.shouldDeactivateButtonAfterClick?a(r):void 0)}},toggleGodMode(e){e.preventDefault();void 0!==e.button&&0!==e.button||Evader.game.options.toggleGodMode()},handleHold(t){t.preventDefault();const n=void 0!==t.button&&0!==t.button,a="god-mode-status"===t.target.parentNode.id;if(n||a)return;Evader.game.holdPlayer(e(t));const{registerEvents:o,playerMove:r,playerRelease:i}=u;o(r),o(i)},handleMove(t){t.preventDefault(),Evader.game.movePlayer(e(t))},handleRelease(t){t.preventDefault();const{unregisterEvents:n,playerMove:a,playerRelease:o}=u;n(a),n(o),Evader.game.releasePlayer(e(t,{changedTouchEvent:!0}))},resizeHandler(e){Evader.state.getGameState().game.isInProgress&&Evader.game.reset();const t=document.body.classList.contains("smaller"),n=window.matchMedia(Evader.config.entity.smallerGameArea.mediaQueryString).matches;!t&&n&&document.body.classList.add("smaller"),s.meta.gameAreaSize.classList[n?"remove":"add"]("toggleable")},toggleGameAreaSize(e){e.preventDefault();if(void 0!==e.button&&0!==e.button)return;if(window.matchMedia(Evader.config.entity.smallerGameArea.mediaQueryString).matches)return;const t=document.body.classList.contains("smaller");document.body.classList[t?"remove":"add"]("smaller")},bodyClassMutationObserver:new MutationObserver((function(e,t){Evader.state.getGameState().game.isInProgress&&Evader.game.reset();const n=document.body.classList.contains("smaller");for(const t of e){const e=t.oldValue?.includes("smaller");(e&&!n||!e&&n)&&Evader.game.reset()}})),handleBodyClassMutations(){l.bodyClassMutationObserver.observe(document.body,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0})}},u={registerEvents(e){e.forEach((e=>{const{target:t,events:n,handler:a,options:o}=e;n.forEach((e=>t.addEventListener(e,a,o)))}))},unregisterEvents(e){e.forEach((e=>{const{target:t,events:n,handler:a}=e;n.forEach((e=>t.removeEventListener(e,a)))}))},gameOverlayButtons:[{target:s.gameOverlayButtons.playBtn,events:["click"],handler:l.createGameOverlayButtonHandler("playBtn",(()=>{const{misc:{lastGame:e}}=Evader.state.getGameState();e&&Evader.game.reset(),Evader.game.init()}),{shouldDeactivateButtonAfterClick:!0})},{target:s.gameOverlayButtons.gameModeBtn,events:["click"],handler:l.createGameOverlayButtonHandler("gameModeBtn",(()=>Evader.game.options.changeGameMode()))},{target:s.gameOverlayButtons.randomiserBtn,events:["click"],handler:l.createGameOverlayButtonHandler("randomiserBtn",(()=>Evader.game.options.toggleRandomiser()))},{target:s.gameOverlayButtons.clearStatsBtn,events:["click"],handler:l.createGameOverlayButtonHandler("clearStatsBtn",(()=>Evader.game.options.clearPlayerStats()),{shouldDeactivateButtonAfterClick:!0})},{target:s.gameOverlayButtons.darkModeBtn,events:["click"],handler:l.createGameOverlayButtonHandler("darkModeBtn",(()=>Evader.game.options.toggleDarkMode()))},{target:s.gameOverlayButtons.volumeBtn,events:["click"],handler:l.createGameOverlayButtonHandler("volumeBtn",(()=>Evader.game.options.toggleVolume()))}],playerHold:[{target:document,events:["touchstart"],handler:l.handleHold,options:{passive:!1}},{target:s.player,events:["mousedown"],handler:l.handleHold}],playerMove:[{target:document,events:["touchmove","mousemove"],handler:l.handleMove,options:{passive:!1}}],playerRelease:[{target:document,events:["touchend"],handler:l.handleRelease,options:{passive:!1}},{target:s.player,events:["mousedown"],handler:l.handleRelease,options:{passive:!1}}],windowResize:[{target:window,events:["resize"],handler:l.resizeHandler}],godModeToggle:[{target:s.gameOptions.godModeSwitch,events:["click"],handler:l.toggleGodMode},{target:document,events:["keydown"],handler:e=>{"KeyG"===e.code&&l.toggleGodMode(e)}}],gameAreaResizeToggle:[{target:s.meta.gameAreaSize,events:["click"],handler:l.toggleGameAreaSize}]},c={registerEventHandlers(e){if(!["INIT","GAME_INIT","GAME_OVER"].includes(e.updateType))return;const{registerEvents:t,unregisterEvents:n,gameOverlayButtons:a,godModeToggle:o,windowResize:r,gameAreaResizeToggle:i,playerHold:s,playerMove:d,playerRelease:c}=u,{handleBodyClassMutations:m}=l;"INIT"===e.updateType&&(t(a),t(o),t(r),t(i),m()),"GAME_INIT"===e.updateType&&t(s),"GAME_OVER"===e.updateType&&(n(s),n(d),n(c))},resetView(e){if(!["GAME_RESET"].includes(e.updateType))return;const{game:{gameLoopIntervalId:t}}=e;clearTimeout(t),Object.keys(s.gameOverlayButtons).forEach((e=>{s.gameOverlayButtons[e].classList.remove("active")}));const{unregisterEvents:n,playerHold:a,playerMove:o,playerRelease:r}=u;n(a),n(o),n(r),Evader.view.initView()},renderGameMeta(e){if(!["INIT","GAME_INIT","GAME_LOOP_UPDATE","GAME_OVER","OPTIONS_CLEAR_PLAYER_STATS","OPTIONS_DARK_MODE_TOGGLE","OPTIONS_GAME_MODE_CHANGE","OPTIONS_GAME_RANDOMISER_TOGGLE","OPTIONS_GOD_MODE_TOGGLE"].includes(e.updateType))return;const{view:{gameAreaDescriptor:t},game:{elapsedTime:n,isOver:a},enemy:o,misc:{gameOptions:{darkModeIsEnabled:d,gameMode:l,randomiserEnabledOn:u,godMode:c},playerStats:{lastScore:m,bestScore:p}},updateType:_}=e,g=e=>{document.body.classList[e?"add":"remove"]("dark")},v=e=>{const t=`<div class="sprite-meta sprite-${e}Mode sprite-left"></div>`,n=`<span class="game-meta-left-text">· ${"meditation"===e?"meditator":"sprinter"}</span>`;s.meta.gameMode.innerHTML=`${t}${n}`},f=e=>{const t=!Object.values(e).some((e=>!e)),n=`<div class="sprite-meta sprite-randomiser sprite-right${t?"":" sprite-grayscale"}"></div>`,a=`<span class="game-meta-right-text">${t?"randomised":"engineered"} ·</span>`;s.meta.gameRandomiserStatus.innerHTML=`${a}${n}`},y=(e,t,n)=>{const a=e[t][n],o=a?`<div class="sprite-meta sprite-${i(n,a)}Medal sprite-left"></div>`:"",r=a?`<span class="game-meta-left-text">· ${a}</span>`:"";s.meta.bestScore.innerHTML=`${o}${r}`},h=(e,t,n)=>{const a=`<span class="game-meta-right-text">${e[t][n]||"a new you"} ·</span>`;s.meta.lastScore.innerHTML=`${a}<div class="sprite-meta sprite-victoryHand sprite-right"></div>`},A=e=>{const t=e?(e/1e3).toFixed(3):"GO",n="GO"===t?" pulsate":"",a=`<div class="sprite-meta sprite-indexFingerPointingDown sprite-right${n}"></div>`,o=`<span class="game-meta-right-text${n}">${t} ·</span>`;s.meta.lastScore.innerHTML=`${o}${a}`},E=e=>{s.gameOptions.godModeSwitch.innerHTML=e?'<div class="sprite-meta sprite-godMode sprite-center"></div>':""};"INIT"===_&&((e=>{const{gameAreaDimensions:t}=Evader.config.entity[e];s.meta.gameAreaSize.innerHTML=t})(t),g(d),v(l),f(u),y(p,t,l),h(m,t,l),E(c.isActive)),"GAME_INIT"===_&&A(n),["GAME_OVER","OPTIONS_CLEAR_PLAYER_STATS"].includes(_)&&(y(p,t,l),h(m,t,l)),"GAME_LOOP_UPDATE"===_&&A(n),"OPTIONS_DARK_MODE_TOGGLE"===_&&g(d),"OPTIONS_GAME_MODE_CHANGE"===_&&(v(l),y(p,t,l),h(m,t,l),a||r(s.enemies,o.poses)),"OPTIONS_GAME_RANDOMISER_TOGGLE"===_&&(f(u),a||r(s.enemies,o.poses)),"OPTIONS_GOD_MODE_TOGGLE"===_&&E(c.isActive)},renderPlayer(e){["INIT","GAME_PLAYER_MOVE"].includes(e.updateType)&&o(s.player,e.player.position)},renderEnemies(e){["INIT","GAME_LOOP_UPDATE"].includes(e.updateType)&&r(s.enemies,e.enemy.poses)},renderGameOverlay(e){if(!(!e.game.isInProgress&&["INIT","GAME_INIT","GAME_OVER","OPTIONS_GAME_MODE_CHANGE","OPTIONS_GAME_RANDOMISER_TOGGLE","OPTIONS_DARK_MODE_TOGGLE","OPTIONS_VOLUME_TOGGLE"].includes(e.updateType)))return;const{view:{gameAreaDescriptor:t},misc:{gameOptions:{gameMode:n,darkModeIsEnabled:a,randomiserEnabledOn:o,volume:r},lastGame:i},updateType:l}=e;if("INIT"===l){const e=!Object.values(o).some((e=>!e));s.gameOverlayWrapper.classList.remove("invisible"),d.gameOverlay.playBtn(i,n,t),d.gameOverlay.gameModeBtn(n),d.gameOverlay.randomiserBtn(e),d.gameOverlay.clearStatsBtn(),d.gameOverlay.darkModeBtn(a),d.gameOverlay.volumeBtn(r)}if("GAME_INIT"===l&&s.gameOverlayWrapper.classList.add("invisible"),"GAME_OVER"===l&&(d.gameOverlay.playBtn(i,n,t),s.gameOverlayWrapper.classList.remove("invisible")),"OPTIONS_GAME_MODE_CHANGE"===l&&(d.gameOverlay.playBtn(i,n,t),d.gameOverlay.gameModeBtn(n)),"OPTIONS_GAME_RANDOMISER_TOGGLE"===l){const e=!Object.values(o).some((e=>!e));d.gameOverlay.randomiserBtn(e)}"OPTIONS_DARK_MODE_TOGGLE"===l&&d.gameOverlay.darkModeBtn(a),"OPTIONS_VOLUME_TOGGLE"===l&&d.gameOverlay.volumeBtn(r)},renderCursor(e){["GAME_START","GAME_PLAYER_HOLD","GAME_PLAYER_RELEASE","GAME_OVER","GAME_RESET"].includes(e.updateType)&&(["GAME_START","GAME_PLAYER_HOLD"].includes(e.updateType)?(document.documentElement.classList.add("no-cursor"),s.player.classList.add("no-cursor","hold")):(document.documentElement.classList.remove("no-cursor"),s.player.classList.remove("no-cursor","hold")))}};return{isGameAreaSmaller:()=>document.body.classList.contains("smaller"),getGameAreaBorderWidth:()=>t(s.gameArea),getGameAreaBoundingRect:()=>n(s.gameArea),isPlayerAtBounds:e=>a(s.player,{boundAreaBorderWidth:e.borderWidth,boundAreaBoundingRect:e.boundingRect}),isEnemyAtBounds:(e,t)=>a(s.enemies[e],{boundAreaBorderWidth:t.borderWidth,boundAreaBoundingRect:t.boundingRect}),initView(e=Evader.state.initGameState()){this.render(e)},render(e,t){for(const n of Object.values(c))n(e,t)}}}()),Evader.extend("audio",function(){const e=new Howl({src:["assets/audio/audiosprite.webm","assets/audio/audiosprite.mp3"],sprite:{bgm:[0,510374.6031746032,!0],bronze:[512e3,574.6938775509989],enemyWallCollision:[514e3,284.2857142857156],extraordinaire:[516e3,1018.7755102041365],gameOptionClearStats:[519e3,754.8979591837224],gameOptionDarkModeToggle:[521e3,73.33333333338032],gameOptionDeselect:[523e3,589.2970521541656],gameOptionMeditationMode:[525e3,3995.5555555555975],gameOptionPlay:[53e4,3995.5555555555975],gameOptionRandomiserOff:[535e3,625.0113378685],gameOptionRandomiserOn:[537e3,625.0113378685],gameOptionSelect:[539e3,732.1541950113897],gameOptionSprintMode:[541e3,3598.2086167800844],gameOptionVolumeToggle:[546e3,220.34013605446034],gameOver:[548e3,1410.6122448979477],gold:[551e3,470.2040816326871],playerEnemyCollision:[553e3,989.5238095238028],playerWallCollision:[555e3,1875.6009070294795],silver:[558e3,626.9387755102116],superb:[56e4,679.1836734694243]}}),t=[0,.125,.25,.5],n=500;return e.once("load",(function(){e.volume(t[Evader.state.getGameState().misc.gameOptions.volume??3]),Evader.initialiser.run()})),{totalVolumeValues:t.length,play(t){("bgm"===t||Evader.state.getGameState().misc.gameOptions.volume)&&e.play(t)},setVolume(a,o,r=n){if(o===t.length-1)return e.volume(t[o]);e.fade(t[a],t[o],r)},pause(t){e.pause(t)},isPlaying(){e.playing()}}}()),Evader.extend("initialiser",function(){const e=document.getElementById("splash-message");Evader.state.persistence.get("GAME_OPTIONS")&&!Evader.state.persistence.get("GAME_OPTIONS").darkModeIsEnabled&&document.body.classList.remove("dark");const t=()=>{"interactive"===document.readyState&&(e.innerHTML="loading resources..."),"complete"===document.readyState&&(e.innerHTML="loading audio...&nbsp;&nbsp;&nbsp;&nbsp;",document.removeEventListener("readystatechange",t))};return document.addEventListener("readystatechange",t),{run:function(){window.matchMedia(Evader.config.entity.smallerGameArea.mediaQueryString).matches?document.body.classList.add("smaller"):document.getElementById("game-area-size").classList.add("toggleable"),Evader.view.initView(),setTimeout((()=>{document.body.click(),document.getElementById("game-title-splash").classList.add("no-display"),document.body.classList.remove("loading"),document.getElementById("game").classList.remove("no-display"),Evader.audio.play("bgm")}),1e3)}}}());